const colecta={arboles:[],patronCultivos:{hectareaRiego:"",hectareaTemporal:"",sinUso:""}};function colectaArbol(){const e=document.querySelector("#tablaVariedadArboles"),t={},{arboles:r}=colecta;for(let o=1;o<e.rows.length;o++){for(let r=0;r<e.rows[o].cells.length;r++){const a=e.rows[o].cells[r].firstChild;a&&a.addEventListener("input",(function(a){r<1?t.variedad=e.rows[o].cells[r].firstChild.value:(valorActual=parseInt(e.rows[o].cells[r].firstChild.value),t.numArboles=valorActual,dividirPorcentaje("#tablaVariedadArboles",1,2))}))}colecta.arboles=[...r,t]}}function colectaPatronCultivos(){const e=document.querySelector("#tablaPatronCultivos");for(let t=0;t<e.children[1].children.length;t++){e.children[1].children[t].cells[1].children[0].addEventListener("input",()=>{const e=document.querySelector("#hectareaRiegoInput").value,t=document.querySelector("#hectareaTemporalInput").value,r=document.querySelector("#hectareaSinUsoInput").value;colecta.patronCultivos.hectareaRiego=e,colecta.patronCultivos.hectareaTemporal=t,colecta.patronCultivos.sinUso=r,mostrarSumatoriaPatronCultivos()})}}function mostrarSumatoriaPatronCultivos(){const e=document.querySelector("#superficieCultivo"),t=document.querySelector("#superficieCultivoPorcentaje"),r=document.querySelector("#hectareaRiegoPorcentaje"),o=document.querySelector("#hectareaTemporalPorcentaje"),a=document.querySelector("#hectareaSinUsoPorcentaje"),l=document.querySelector("#totalHectareas"),n=document.querySelector("#totalHectareasPorcentaje");let c=parseFloat(document.querySelector("#superficieCultivo").textContent),i=parseFloat(document.querySelector("#hectareaRiegoInput").value),d=parseFloat(document.querySelector("#hectareaTemporalInput").value),u=parseFloat(document.querySelector("#hectareaSinUsoInput").value),s=parseFloat(document.querySelector("#totalHectareas").textContent),m=0,h=0,p=0,v=0,C=0;c=i+d,s=c+u,m=c/s*100,h=i/c*100,p=d/c*100,v=u/s*100,C=m+v,e.textContent=c,t.textContent=m.toFixed(2),r.textContent=h.toFixed(2),o.textContent=p.toFixed(2),a.textContent=v.toFixed(2),l.textContent=s,n.textContent=C.toFixed(2)}function sumarColumnaInputs(e,t){const r=document.querySelector(e);let o=0;for(let e=0;e<r.children[1].children.length;e++)o+=parseInt(r.children[1].rows[e].cells[t].firstChild.value);return o}function dividirPorcentaje(e,t,r){const o=document.querySelector(e);for(let a=0;a<o.children[1].children.length;a++)for(let l=r;l<o.children[1].children[a].cells.length;l++){const r=sumarColumnaInputs(e,t),n=(parseInt(o.children[1].children[a].cells[l-1].firstChild.value)/r*100).toFixed(2);o.children[1].children[a].cells[l].innerHTML=`<span>% ${n}</span>`}}document.addEventListener("DOMContentLoaded",()=>{colectaArbol(),colectaPatronCultivos()});const botonAgregarFilaVariedadArboles=document.querySelector("#nuevaFilaVariedad");function filaVariedadArboles(){const e=document.querySelector("#tablaVariedadArboles").children[1],t=document.createElement("TR"),r=document.createElement("TD"),o=document.createElement("TD"),a=document.createElement("TD"),l=document.createElement("INPUT"),n=document.createElement("INPUT");l.setAttribute("type","text"),l.setAttribute("name","arboles[variedad]"),l.setAttribute("required",""),n.setAttribute("type","number"),n.setAttribute("required",""),n.setAttribute("name","arboles[variedad]"),a.classList.add("total"),r.appendChild(l),o.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),e.appendChild(t),colectaArbol()}botonAgregarFilaVariedadArboles.addEventListener("click",()=>{filaVariedadArboles()});const botonEliminarFilaVariedad=document.querySelector("#eliminarFilaVariedad");function eliminarFilaVariedad(){const e=document.querySelector("#tablaVariedadArboles").children[1],t=e.rows.length-1,r=e.children[t];e.children.length>0&&(r.remove(),colecta.arboles.pop())}botonEliminarFilaVariedad.addEventListener("click",()=>{eliminarFilaVariedad()});